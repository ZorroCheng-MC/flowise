{"ast":null,"code":"import{useSelector}from'react-redux';import{Box,List,ListItemButton,ListItem,ListItemAvatar,ListItemText,Typography,Stack}from'@mui/material';import PerfectScrollbar from'react-perfect-scrollbar';import{baseURL}from'store/constant';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var SelectVariable=function SelectVariable(_ref){var availableNodesForVariable=_ref.availableNodesForVariable,_ref$disabled=_ref.disabled,disabled=_ref$disabled===void 0?false:_ref$disabled,onSelectAndReturnVal=_ref.onSelectAndReturnVal;var customization=useSelector(function(state){return state.customization;});var onSelectOutputResponseClick=function onSelectOutputResponseClick(node){var isUserQuestion=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var variablePath=isUserQuestion?\"question\":\"\".concat(node.id,\".data.instance\");var newInput=\"{{\".concat(variablePath,\"}}\");onSelectAndReturnVal(newInput);};return/*#__PURE__*/_jsx(_Fragment,{children:!disabled&&/*#__PURE__*/_jsxs(\"div\",{style:{flex:30},children:[/*#__PURE__*/_jsx(Stack,{flexDirection:\"row\",sx:{mb:1,ml:2,mt:2},children:/*#__PURE__*/_jsx(Typography,{variant:\"h5\",children:\"Select Variable\"})}),/*#__PURE__*/_jsx(PerfectScrollbar,{style:{height:'100%',maxHeight:'calc(100vh - 220px)',overflowX:'hidden'},children:/*#__PURE__*/_jsx(Box,{sx:{pl:2,pr:2},children:/*#__PURE__*/_jsxs(List,{children:[/*#__PURE__*/_jsx(ListItemButton,{sx:{p:0,borderRadius:\"\".concat(customization.borderRadius,\"px\"),boxShadow:'0 2px 14px 0 rgb(32 40 45 / 8%)',mb:1},disabled:disabled,onClick:function onClick(){return onSelectOutputResponseClick(null,true);},children:/*#__PURE__*/_jsxs(ListItem,{alignItems:\"center\",children:[/*#__PURE__*/_jsx(ListItemAvatar,{children:/*#__PURE__*/_jsx(\"div\",{style:{width:50,height:50,borderRadius:'50%',backgroundColor:'white'},children:/*#__PURE__*/_jsx(\"img\",{style:{width:'100%',height:'100%',padding:10,objectFit:'contain'},alt:\"AI\",src:\"https://raw.githubusercontent.com/zahidkhawaja/langchain-chat-nextjs/main/public/parroticon.png\"})})}),/*#__PURE__*/_jsx(ListItemText,{sx:{ml:1},primary:\"question\",secondary:\"User's question from chatbox\"})]})}),availableNodesForVariable&&availableNodesForVariable.length>0&&availableNodesForVariable.map(function(node,index){var _selectedOutputAnchor;var selectedOutputAnchor=node.data.outputAnchors[0].options.find(function(ancr){return ancr.name===node.data.outputs['output'];});return/*#__PURE__*/_jsx(ListItemButton,{sx:{p:0,borderRadius:\"\".concat(customization.borderRadius,\"px\"),boxShadow:'0 2px 14px 0 rgb(32 40 45 / 8%)',mb:1},disabled:disabled,onClick:function onClick(){return onSelectOutputResponseClick(node);},children:/*#__PURE__*/_jsxs(ListItem,{alignItems:\"center\",children:[/*#__PURE__*/_jsx(ListItemAvatar,{children:/*#__PURE__*/_jsx(\"div\",{style:{width:50,height:50,borderRadius:'50%',backgroundColor:'white'},children:/*#__PURE__*/_jsx(\"img\",{style:{width:'100%',height:'100%',padding:10,objectFit:'contain'},alt:node.data.name,src:\"\".concat(baseURL,\"/api/v1/node-icon/\").concat(node.data.name)})})}),/*#__PURE__*/_jsx(ListItemText,{sx:{ml:1},primary:node.data.inputs.chainName?node.data.inputs.chainName:node.data.id,secondary:\"\".concat((_selectedOutputAnchor=selectedOutputAnchor===null||selectedOutputAnchor===void 0?void 0:selectedOutputAnchor.label)!==null&&_selectedOutputAnchor!==void 0?_selectedOutputAnchor:'output',\" from \").concat(node.data.label)})]})},index);})]})})})]})});};export default SelectVariable;","map":{"version":3,"names":["useSelector","Box","List","ListItemButton","ListItem","ListItemAvatar","ListItemText","Typography","Stack","PerfectScrollbar","baseURL","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SelectVariable","_ref","availableNodesForVariable","_ref$disabled","disabled","onSelectAndReturnVal","customization","state","onSelectOutputResponseClick","node","isUserQuestion","arguments","length","undefined","variablePath","concat","id","newInput","children","style","flex","flexDirection","sx","mb","ml","mt","variant","height","maxHeight","overflowX","pl","pr","p","borderRadius","boxShadow","onClick","alignItems","width","backgroundColor","padding","objectFit","alt","src","primary","secondary","map","index","_selectedOutputAnchor","selectedOutputAnchor","data","outputAnchors","options","find","ancr","name","outputs","inputs","chainName","label"],"sources":["/Users/zorro/Downloads/Flowise/packages/ui/src/ui-component/json/SelectVariable.js"],"sourcesContent":["import { useSelector } from 'react-redux'\nimport PropTypes from 'prop-types'\nimport { Box, List, ListItemButton, ListItem, ListItemAvatar, ListItemText, Typography, Stack } from '@mui/material'\nimport PerfectScrollbar from 'react-perfect-scrollbar'\n\nimport { baseURL } from 'store/constant'\n\nconst SelectVariable = ({ availableNodesForVariable, disabled = false, onSelectAndReturnVal }) => {\n    const customization = useSelector((state) => state.customization)\n\n    const onSelectOutputResponseClick = (node, isUserQuestion = false) => {\n        let variablePath = isUserQuestion ? `question` : `${node.id}.data.instance`\n        const newInput = `{{${variablePath}}}`\n        onSelectAndReturnVal(newInput)\n    }\n\n    return (\n        <>\n            {!disabled && (\n                <div style={{ flex: 30 }}>\n                    <Stack flexDirection='row' sx={{ mb: 1, ml: 2, mt: 2 }}>\n                        <Typography variant='h5'>Select Variable</Typography>\n                    </Stack>\n                    <PerfectScrollbar style={{ height: '100%', maxHeight: 'calc(100vh - 220px)', overflowX: 'hidden' }}>\n                        <Box sx={{ pl: 2, pr: 2 }}>\n                            <List>\n                                <ListItemButton\n                                    sx={{\n                                        p: 0,\n                                        borderRadius: `${customization.borderRadius}px`,\n                                        boxShadow: '0 2px 14px 0 rgb(32 40 45 / 8%)',\n                                        mb: 1\n                                    }}\n                                    disabled={disabled}\n                                    onClick={() => onSelectOutputResponseClick(null, true)}\n                                >\n                                    <ListItem alignItems='center'>\n                                        <ListItemAvatar>\n                                            <div\n                                                style={{\n                                                    width: 50,\n                                                    height: 50,\n                                                    borderRadius: '50%',\n                                                    backgroundColor: 'white'\n                                                }}\n                                            >\n                                                <img\n                                                    style={{\n                                                        width: '100%',\n                                                        height: '100%',\n                                                        padding: 10,\n                                                        objectFit: 'contain'\n                                                    }}\n                                                    alt='AI'\n                                                    src='https://raw.githubusercontent.com/zahidkhawaja/langchain-chat-nextjs/main/public/parroticon.png'\n                                                />\n                                            </div>\n                                        </ListItemAvatar>\n                                        <ListItemText sx={{ ml: 1 }} primary='question' secondary={`User's question from chatbox`} />\n                                    </ListItem>\n                                </ListItemButton>\n                                {availableNodesForVariable &&\n                                    availableNodesForVariable.length > 0 &&\n                                    availableNodesForVariable.map((node, index) => {\n                                        const selectedOutputAnchor = node.data.outputAnchors[0].options.find(\n                                            (ancr) => ancr.name === node.data.outputs['output']\n                                        )\n                                        return (\n                                            <ListItemButton\n                                                key={index}\n                                                sx={{\n                                                    p: 0,\n                                                    borderRadius: `${customization.borderRadius}px`,\n                                                    boxShadow: '0 2px 14px 0 rgb(32 40 45 / 8%)',\n                                                    mb: 1\n                                                }}\n                                                disabled={disabled}\n                                                onClick={() => onSelectOutputResponseClick(node)}\n                                            >\n                                                <ListItem alignItems='center'>\n                                                    <ListItemAvatar>\n                                                        <div\n                                                            style={{\n                                                                width: 50,\n                                                                height: 50,\n                                                                borderRadius: '50%',\n                                                                backgroundColor: 'white'\n                                                            }}\n                                                        >\n                                                            <img\n                                                                style={{\n                                                                    width: '100%',\n                                                                    height: '100%',\n                                                                    padding: 10,\n                                                                    objectFit: 'contain'\n                                                                }}\n                                                                alt={node.data.name}\n                                                                src={`${baseURL}/api/v1/node-icon/${node.data.name}`}\n                                                            />\n                                                        </div>\n                                                    </ListItemAvatar>\n                                                    <ListItemText\n                                                        sx={{ ml: 1 }}\n                                                        primary={node.data.inputs.chainName ? node.data.inputs.chainName : node.data.id}\n                                                        secondary={`${selectedOutputAnchor?.label ?? 'output'} from ${node.data.label}`}\n                                                    />\n                                                </ListItem>\n                                            </ListItemButton>\n                                        )\n                                    })}\n                            </List>\n                        </Box>\n                    </PerfectScrollbar>\n                </div>\n            )}\n        </>\n    )\n}\n\nSelectVariable.propTypes = {\n    availableNodesForVariable: PropTypes.array,\n    disabled: PropTypes.bool,\n    onSelectAndReturnVal: PropTypes.func\n}\n\nexport default SelectVariable\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}