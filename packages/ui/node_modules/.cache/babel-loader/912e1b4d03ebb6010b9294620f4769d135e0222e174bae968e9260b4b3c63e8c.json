{"ast":null,"code":"import _slicedToArray from\"/Users/zorro/Downloads/Flowise/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{IconClipboard,IconDownload}from'@tabler/icons';import{memo,useState}from'react';import{Prism as SyntaxHighlighter}from'react-syntax-highlighter';import{oneDark}from'react-syntax-highlighter/dist/esm/styles/prism';import{Box,IconButton,Popover,Typography}from'@mui/material';import{useTheme}from'@mui/material/styles';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var programmingLanguages={javascript:'.js',python:'.py',java:'.java',c:'.c',cpp:'.cpp','c++':'.cpp','c#':'.cs',ruby:'.rb',php:'.php',swift:'.swift','objective-c':'.m',kotlin:'.kt',typescript:'.ts',go:'.go',perl:'.pl',rust:'.rs',scala:'.scala',haskell:'.hs',lua:'.lua',shell:'.sh',sql:'.sql',html:'.html',css:'.css'};export var CodeBlock=/*#__PURE__*/memo(function(_ref){var _theme$palette;var language=_ref.language,chatflowid=_ref.chatflowid,isDialog=_ref.isDialog,value=_ref.value;var theme=useTheme();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),anchorEl=_useState2[0],setAnchorEl=_useState2[1];var openPopOver=Boolean(anchorEl);var handleClosePopOver=function handleClosePopOver(){setAnchorEl(null);};var copyToClipboard=function copyToClipboard(event){if(!navigator.clipboard||!navigator.clipboard.writeText){return;}navigator.clipboard.writeText(value);setAnchorEl(event.currentTarget);setTimeout(function(){handleClosePopOver();},1500);};var downloadAsFile=function downloadAsFile(){var fileExtension=programmingLanguages[language]||'.file';var suggestedFileName=\"file-\".concat(chatflowid).concat(fileExtension);var fileName=suggestedFileName;if(!fileName){// user pressed cancel on prompt\nreturn;}var blob=new Blob([value],{type:'text/plain'});var url=URL.createObjectURL(blob);var link=document.createElement('a');link.download=fileName;link.href=url;link.style.display='none';document.body.appendChild(link);link.click();document.body.removeChild(link);URL.revokeObjectURL(url);};return/*#__PURE__*/_jsxs(\"div\",{style:{width:isDialog?'':300},children:[/*#__PURE__*/_jsx(Box,{sx:{color:'white',background:(_theme$palette=theme.palette)===null||_theme$palette===void 0?void 0:_theme$palette.common.dark,p:1,borderTopLeftRadius:10,borderTopRightRadius:10},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'row',alignItems:'center'},children:[language,/*#__PURE__*/_jsx(\"div\",{style:{flex:1}}),/*#__PURE__*/_jsx(IconButton,{size:\"small\",title:\"Copy\",color:\"success\",onClick:copyToClipboard,children:/*#__PURE__*/_jsx(IconClipboard,{})}),/*#__PURE__*/_jsx(Popover,{open:openPopOver,anchorEl:anchorEl,onClose:handleClosePopOver,anchorOrigin:{vertical:'top',horizontal:'right'},transformOrigin:{vertical:'top',horizontal:'left'},children:/*#__PURE__*/_jsx(Typography,{variant:\"h6\",sx:{pl:1,pr:1,color:'white',background:theme.palette.success.dark},children:\"Copied!\"})}),/*#__PURE__*/_jsx(IconButton,{size:\"small\",title:\"Download\",color:\"primary\",onClick:downloadAsFile,children:/*#__PURE__*/_jsx(IconDownload,{})})]})}),/*#__PURE__*/_jsx(SyntaxHighlighter,{language:language,style:oneDark,customStyle:{margin:0},children:value})]});});CodeBlock.displayName='CodeBlock';","map":{"version":3,"names":["IconClipboard","IconDownload","memo","useState","Prism","SyntaxHighlighter","oneDark","Box","IconButton","Popover","Typography","useTheme","jsx","_jsx","jsxs","_jsxs","programmingLanguages","javascript","python","java","c","cpp","ruby","php","swift","kotlin","typescript","go","perl","rust","scala","haskell","lua","shell","sql","html","css","CodeBlock","_ref","_theme$palette","language","chatflowid","isDialog","value","theme","_useState","_useState2","_slicedToArray","anchorEl","setAnchorEl","openPopOver","Boolean","handleClosePopOver","copyToClipboard","event","navigator","clipboard","writeText","currentTarget","setTimeout","downloadAsFile","fileExtension","suggestedFileName","concat","fileName","blob","Blob","type","url","URL","createObjectURL","link","document","createElement","download","href","style","display","body","appendChild","click","removeChild","revokeObjectURL","width","children","sx","color","background","palette","common","dark","p","borderTopLeftRadius","borderTopRightRadius","flexDirection","alignItems","flex","size","title","onClick","open","onClose","anchorOrigin","vertical","horizontal","transformOrigin","variant","pl","pr","success","customStyle","margin","displayName"],"sources":["/Users/zorro/Downloads/Flowise/packages/ui/src/ui-component/markdown/CodeBlock.js"],"sourcesContent":["import { IconClipboard, IconDownload } from '@tabler/icons'\nimport { memo, useState } from 'react'\nimport { Prism as SyntaxHighlighter } from 'react-syntax-highlighter'\nimport { oneDark } from 'react-syntax-highlighter/dist/esm/styles/prism'\nimport PropTypes from 'prop-types'\nimport { Box, IconButton, Popover, Typography } from '@mui/material'\nimport { useTheme } from '@mui/material/styles'\n\nconst programmingLanguages = {\n    javascript: '.js',\n    python: '.py',\n    java: '.java',\n    c: '.c',\n    cpp: '.cpp',\n    'c++': '.cpp',\n    'c#': '.cs',\n    ruby: '.rb',\n    php: '.php',\n    swift: '.swift',\n    'objective-c': '.m',\n    kotlin: '.kt',\n    typescript: '.ts',\n    go: '.go',\n    perl: '.pl',\n    rust: '.rs',\n    scala: '.scala',\n    haskell: '.hs',\n    lua: '.lua',\n    shell: '.sh',\n    sql: '.sql',\n    html: '.html',\n    css: '.css'\n}\n\nexport const CodeBlock = memo(({ language, chatflowid, isDialog, value }) => {\n    const theme = useTheme()\n    const [anchorEl, setAnchorEl] = useState(null)\n    const openPopOver = Boolean(anchorEl)\n\n    const handleClosePopOver = () => {\n        setAnchorEl(null)\n    }\n\n    const copyToClipboard = (event) => {\n        if (!navigator.clipboard || !navigator.clipboard.writeText) {\n            return\n        }\n\n        navigator.clipboard.writeText(value)\n        setAnchorEl(event.currentTarget)\n        setTimeout(() => {\n            handleClosePopOver()\n        }, 1500)\n    }\n\n    const downloadAsFile = () => {\n        const fileExtension = programmingLanguages[language] || '.file'\n        const suggestedFileName = `file-${chatflowid}${fileExtension}`\n        const fileName = suggestedFileName\n\n        if (!fileName) {\n            // user pressed cancel on prompt\n            return\n        }\n\n        const blob = new Blob([value], { type: 'text/plain' })\n        const url = URL.createObjectURL(blob)\n        const link = document.createElement('a')\n        link.download = fileName\n        link.href = url\n        link.style.display = 'none'\n        document.body.appendChild(link)\n        link.click()\n        document.body.removeChild(link)\n        URL.revokeObjectURL(url)\n    }\n\n    return (\n        <div style={{ width: isDialog ? '' : 300 }}>\n            <Box sx={{ color: 'white', background: theme.palette?.common.dark, p: 1, borderTopLeftRadius: 10, borderTopRightRadius: 10 }}>\n                <div style={{ display: 'flex', flexDirection: 'row', alignItems: 'center' }}>\n                    {language}\n                    <div style={{ flex: 1 }}></div>\n                    <IconButton size='small' title='Copy' color='success' onClick={copyToClipboard}>\n                        <IconClipboard />\n                    </IconButton>\n                    <Popover\n                        open={openPopOver}\n                        anchorEl={anchorEl}\n                        onClose={handleClosePopOver}\n                        anchorOrigin={{\n                            vertical: 'top',\n                            horizontal: 'right'\n                        }}\n                        transformOrigin={{\n                            vertical: 'top',\n                            horizontal: 'left'\n                        }}\n                    >\n                        <Typography variant='h6' sx={{ pl: 1, pr: 1, color: 'white', background: theme.palette.success.dark }}>\n                            Copied!\n                        </Typography>\n                    </Popover>\n                    <IconButton size='small' title='Download' color='primary' onClick={downloadAsFile}>\n                        <IconDownload />\n                    </IconButton>\n                </div>\n            </Box>\n\n            <SyntaxHighlighter language={language} style={oneDark} customStyle={{ margin: 0 }}>\n                {value}\n            </SyntaxHighlighter>\n        </div>\n    )\n})\nCodeBlock.displayName = 'CodeBlock'\n\nCodeBlock.propTypes = {\n    language: PropTypes.string,\n    chatflowid: PropTypes.string,\n    isDialog: PropTypes.bool,\n    value: PropTypes.string\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}