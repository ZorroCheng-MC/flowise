{"ast":null,"code":"import _objectSpread from\"/Users/zorro/Downloads/Flowise/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{forwardRef,useEffect}from'react';import{Link}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';// material-ui\nimport{useTheme}from'@mui/material/styles';import{Avatar,Chip,ListItemButton,ListItemIcon,ListItemText,Typography,useMediaQuery}from'@mui/material';// project imports\nimport{MENU_OPEN,SET_MENU}from'store/actions';import config from'config';// assets\nimport FiberManualRecordIcon from'@mui/icons-material/FiberManualRecord';// ==============================|| SIDEBAR MENU LIST ITEMS ||============================== //\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var NavItem=function NavItem(_ref){var item=_ref.item,level=_ref.level,navType=_ref.navType,onClick=_ref.onClick,onUploadFile=_ref.onUploadFile;var theme=useTheme();var dispatch=useDispatch();var customization=useSelector(function(state){return state.customization;});var matchesSM=useMediaQuery(theme.breakpoints.down('lg'));var Icon=item.icon;var itemIcon=item!==null&&item!==void 0&&item.icon?/*#__PURE__*/_jsx(Icon,{stroke:1.5,size:\"1.3rem\"}):/*#__PURE__*/_jsx(FiberManualRecordIcon,{sx:{width:customization.isOpen.findIndex(function(id){return id===(item===null||item===void 0?void 0:item.id);})>-1?8:6,height:customization.isOpen.findIndex(function(id){return id===(item===null||item===void 0?void 0:item.id);})>-1?8:6},fontSize:level>0?'inherit':'medium'});var itemTarget='_self';if(item.target){itemTarget='_blank';}var listItemProps={component:/*#__PURE__*/forwardRef(function ListItemPropsComponent(props,ref){return/*#__PURE__*/_jsx(Link,_objectSpread(_objectSpread({ref:ref},props),{},{to:\"\".concat(config.basename).concat(item.url),target:itemTarget}));})};if(item!==null&&item!==void 0&&item.external){listItemProps={component:'a',href:item.url,target:itemTarget};}if((item===null||item===void 0?void 0:item.id)==='loadChatflow'){listItemProps.component='label';}var handleFileUpload=function handleFileUpload(e){if(!e.target.files)return;var file=e.target.files[0];var reader=new FileReader();reader.onload=function(evt){var _evt$target;if(!(evt!==null&&evt!==void 0&&(_evt$target=evt.target)!==null&&_evt$target!==void 0&&_evt$target.result)){return;}var result=evt.target.result;onUploadFile(result);};reader.readAsText(file);};var itemHandler=function itemHandler(id){if(navType==='SETTINGS'&&id!=='loadChatflow'){onClick(id);}else{dispatch({type:MENU_OPEN,id:id});if(matchesSM)dispatch({type:SET_MENU,opened:false});}};// active menu item on page load\nuseEffect(function(){if(navType==='MENU'){var currentIndex=document.location.pathname.toString().split('/').findIndex(function(id){return id===item.id;});if(currentIndex>-1){dispatch({type:MENU_OPEN,id:item.id});}if(!document.location.pathname.toString().split('/')[1]){itemHandler('chatflows');}}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[navType]);return/*#__PURE__*/_jsxs(ListItemButton,_objectSpread(_objectSpread({},listItemProps),{},{disabled:item.disabled,sx:{borderRadius:\"\".concat(customization.borderRadius,\"px\"),mb:0.5,alignItems:'flex-start',backgroundColor:level>1?'transparent !important':'inherit',py:level>1?1:1.25,pl:\"\".concat(level*24,\"px\")},selected:customization.isOpen.findIndex(function(id){return id===item.id;})>-1,onClick:function onClick(){return itemHandler(item.id);},children:[item.id==='loadChatflow'&&/*#__PURE__*/_jsx(\"input\",{type:\"file\",hidden:true,accept:\".json\",onChange:function onChange(e){return handleFileUpload(e);}}),/*#__PURE__*/_jsx(ListItemIcon,{sx:{my:'auto',minWidth:!(item!==null&&item!==void 0&&item.icon)?18:36},children:itemIcon}),/*#__PURE__*/_jsx(ListItemText,{primary:/*#__PURE__*/_jsx(Typography,{variant:customization.isOpen.findIndex(function(id){return id===item.id;})>-1?'h5':'body1',color:\"inherit\",children:item.title}),secondary:item.caption&&/*#__PURE__*/_jsx(Typography,{variant:\"caption\",sx:_objectSpread({},theme.typography.subMenuCaption),display:\"block\",gutterBottom:true,children:item.caption})}),item.chip&&/*#__PURE__*/_jsx(Chip,{color:item.chip.color,variant:item.chip.variant,size:item.chip.size,label:item.chip.label,avatar:item.chip.avatar&&/*#__PURE__*/_jsx(Avatar,{children:item.chip.avatar})})]}));};export default NavItem;","map":{"version":3,"names":["forwardRef","useEffect","Link","useDispatch","useSelector","useTheme","Avatar","Chip","ListItemButton","ListItemIcon","ListItemText","Typography","useMediaQuery","MENU_OPEN","SET_MENU","config","FiberManualRecordIcon","jsx","_jsx","jsxs","_jsxs","NavItem","_ref","item","level","navType","onClick","onUploadFile","theme","dispatch","customization","state","matchesSM","breakpoints","down","Icon","icon","itemIcon","stroke","size","sx","width","isOpen","findIndex","id","height","fontSize","itemTarget","target","listItemProps","component","ListItemPropsComponent","props","ref","_objectSpread","to","concat","basename","url","external","href","handleFileUpload","e","files","file","reader","FileReader","onload","evt","_evt$target","result","readAsText","itemHandler","type","opened","currentIndex","document","location","pathname","toString","split","disabled","borderRadius","mb","alignItems","backgroundColor","py","pl","selected","children","hidden","accept","onChange","my","minWidth","primary","variant","color","title","secondary","caption","typography","subMenuCaption","display","gutterBottom","chip","label","avatar"],"sources":["/Users/zorro/Downloads/Flowise/packages/ui/src/layout/MainLayout/Sidebar/MenuList/NavItem/index.js"],"sourcesContent":["import PropTypes from 'prop-types'\nimport { forwardRef, useEffect } from 'react'\nimport { Link } from 'react-router-dom'\nimport { useDispatch, useSelector } from 'react-redux'\n\n// material-ui\nimport { useTheme } from '@mui/material/styles'\nimport { Avatar, Chip, ListItemButton, ListItemIcon, ListItemText, Typography, useMediaQuery } from '@mui/material'\n\n// project imports\nimport { MENU_OPEN, SET_MENU } from 'store/actions'\nimport config from 'config'\n\n// assets\nimport FiberManualRecordIcon from '@mui/icons-material/FiberManualRecord'\n\n// ==============================|| SIDEBAR MENU LIST ITEMS ||============================== //\n\nconst NavItem = ({ item, level, navType, onClick, onUploadFile }) => {\n    const theme = useTheme()\n    const dispatch = useDispatch()\n    const customization = useSelector((state) => state.customization)\n    const matchesSM = useMediaQuery(theme.breakpoints.down('lg'))\n\n    const Icon = item.icon\n    const itemIcon = item?.icon ? (\n        <Icon stroke={1.5} size='1.3rem' />\n    ) : (\n        <FiberManualRecordIcon\n            sx={{\n                width: customization.isOpen.findIndex((id) => id === item?.id) > -1 ? 8 : 6,\n                height: customization.isOpen.findIndex((id) => id === item?.id) > -1 ? 8 : 6\n            }}\n            fontSize={level > 0 ? 'inherit' : 'medium'}\n        />\n    )\n\n    let itemTarget = '_self'\n    if (item.target) {\n        itemTarget = '_blank'\n    }\n\n    let listItemProps = {\n        component: forwardRef(function ListItemPropsComponent(props, ref) {\n            return <Link ref={ref} {...props} to={`${config.basename}${item.url}`} target={itemTarget} />\n        })\n    }\n    if (item?.external) {\n        listItemProps = { component: 'a', href: item.url, target: itemTarget }\n    }\n    if (item?.id === 'loadChatflow') {\n        listItemProps.component = 'label'\n    }\n\n    const handleFileUpload = (e) => {\n        if (!e.target.files) return\n\n        const file = e.target.files[0]\n\n        const reader = new FileReader()\n        reader.onload = (evt) => {\n            if (!evt?.target?.result) {\n                return\n            }\n            const { result } = evt.target\n            onUploadFile(result)\n        }\n        reader.readAsText(file)\n    }\n\n    const itemHandler = (id) => {\n        if (navType === 'SETTINGS' && id !== 'loadChatflow') {\n            onClick(id)\n        } else {\n            dispatch({ type: MENU_OPEN, id })\n            if (matchesSM) dispatch({ type: SET_MENU, opened: false })\n        }\n    }\n\n    // active menu item on page load\n    useEffect(() => {\n        if (navType === 'MENU') {\n            const currentIndex = document.location.pathname\n                .toString()\n                .split('/')\n                .findIndex((id) => id === item.id)\n            if (currentIndex > -1) {\n                dispatch({ type: MENU_OPEN, id: item.id })\n            }\n            if (!document.location.pathname.toString().split('/')[1]) {\n                itemHandler('chatflows')\n            }\n        }\n\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [navType])\n\n    return (\n        <ListItemButton\n            {...listItemProps}\n            disabled={item.disabled}\n            sx={{\n                borderRadius: `${customization.borderRadius}px`,\n                mb: 0.5,\n                alignItems: 'flex-start',\n                backgroundColor: level > 1 ? 'transparent !important' : 'inherit',\n                py: level > 1 ? 1 : 1.25,\n                pl: `${level * 24}px`\n            }}\n            selected={customization.isOpen.findIndex((id) => id === item.id) > -1}\n            onClick={() => itemHandler(item.id)}\n        >\n            {item.id === 'loadChatflow' && <input type='file' hidden accept='.json' onChange={(e) => handleFileUpload(e)} />}\n            <ListItemIcon sx={{ my: 'auto', minWidth: !item?.icon ? 18 : 36 }}>{itemIcon}</ListItemIcon>\n            <ListItemText\n                primary={\n                    <Typography variant={customization.isOpen.findIndex((id) => id === item.id) > -1 ? 'h5' : 'body1'} color='inherit'>\n                        {item.title}\n                    </Typography>\n                }\n                secondary={\n                    item.caption && (\n                        <Typography variant='caption' sx={{ ...theme.typography.subMenuCaption }} display='block' gutterBottom>\n                            {item.caption}\n                        </Typography>\n                    )\n                }\n            />\n            {item.chip && (\n                <Chip\n                    color={item.chip.color}\n                    variant={item.chip.variant}\n                    size={item.chip.size}\n                    label={item.chip.label}\n                    avatar={item.chip.avatar && <Avatar>{item.chip.avatar}</Avatar>}\n                />\n            )}\n        </ListItemButton>\n    )\n}\n\nNavItem.propTypes = {\n    item: PropTypes.object,\n    level: PropTypes.number,\n    navType: PropTypes.string,\n    onClick: PropTypes.func,\n    onUploadFile: PropTypes.func\n}\n\nexport default NavItem\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}