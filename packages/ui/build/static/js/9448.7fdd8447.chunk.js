"use strict";(self.webpackChunkflowise_ui=self.webpackChunkflowise_ui||[]).push([[9448],{76858:function(e,t,n){var r=n(23917);t.Z={getAllChatflows:function(){return r.Z.get("/chatflows")},getSpecificChatflow:function(e){return r.Z.get("/chatflows/".concat(e))},getSpecificChatflowFromPublicEndpoint:function(e){return r.Z.get("/public-chatflows/".concat(e))},createNewChatflow:function(e){return r.Z.post("/chatflows",e)},updateChatflow:function(e,t){return r.Z.put("/chatflows/".concat(e),t)},deleteChatflow:function(e){return r.Z.delete("/chatflows/".concat(e))},getIsChatflowStreaming:function(e){return r.Z.get("/chatflows-streaming/".concat(e))}}},60990:function(e,t,n){var r=n(32723),a=n(34795),o=n(96234),i=n(30969);t.Z=function(e){var t=(0,i.useState)(null),n=(0,o.Z)(t,2),l=n[0],s=n[1],u=(0,i.useState)(null),c=(0,o.Z)(u,2),d=c[0],f=c[1],h=(0,i.useState)(!1),p=(0,o.Z)(h,2),g=p[0],v=p[1],m=function(){var t=(0,a.Z)((0,r.Z)().mark((function t(){var n,a=arguments;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return v(!0),t.prev=1,t.next=4,e.apply(void 0,a);case 4:n=t.sent,s(n.data),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),f(t.t0||"Unexpected Error!");case 11:return t.prev=11,v(!1),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[1,8,11,14]])})));return function(){return t.apply(this,arguments)}}();return{data:l,error:d,loading:g,request:m}}},52312:function(e,t,n){n.d(t,{S:function(){return o}});var r=n(45971),a=n(26018),o=(0,r.ZP)(a.Z)((function(e){var t=e.theme,n=e.color,r=void 0===n?"primary":n;return{color:"white",backgroundColor:t.palette[r].main,"&:hover":{backgroundColor:t.palette[r].main,backgroundImage:"linear-gradient(rgb(0 0 0/10%) 0 0)"}}}))},54231:function(e,t,n){var r=n(96234),a=n(15749),o=n(30969),i=n(48886),l=n(38357),s=n(87130),u=n(47915),c=n(91862),d=n(52312),f=n(30530),h=n(37574);t.Z=function(e){var t=e.show,n=e.dialogProps,p=e.onConfirm,g=document.getElementById("portal"),v=(0,o.useState)(""),m=(0,r.Z)(v,2),x=m[0],w=m[1],b=(0,o.useState)(""),Z=(0,r.Z)(b,2),y=Z[0],j=Z[1],C=t?(0,h.jsxs)(i.Z,{onKeyUp:function(e){"Enter"===e.key&&p(x,y)},open:t,fullWidth:!0,maxWidth:"xs","aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,h.jsx)(l.Z,{sx:{fontSize:"1rem"},id:"alert-dialog-title",children:n.title}),(0,h.jsxs)(s.Z,{children:[(0,h.jsx)(u.Z,{children:"Username"}),(0,h.jsx)(f.I,{inputParam:{label:"Username",name:"username",type:"string",placeholder:"john doe"},onChange:function(e){return w(e)},value:x,showDialog:!1}),(0,h.jsx)("div",{style:{marginTop:20}}),(0,h.jsx)(u.Z,{children:"Password"}),(0,h.jsx)(f.I,{inputParam:{label:"Password",name:"password",type:"password"},onChange:function(e){return j(e)},value:y})]}),(0,h.jsx)(c.Z,{children:(0,h.jsx)(d.S,{variant:"contained",onClick:function(){return p(x,y)},children:n.confirmButtonName})})]}):null;return(0,a.createPortal)(C,g)}},84956:function(e,t,n){n.d(t,{x:function(){return u}});var r=n(33028),a=n(45304),o=n.n(a),i=n(73835),l=(n(49015),n(61889),n(58457),n(44057),n(94702)),s=n(37574),u=function(e){var t=e.value,n=e.placeholder,a=e.disabled,u=void 0!==a&&a,c=e.type,d=e.style,f=e.onValueChange,h=e.onMouseUp,p=e.onBlur,g=(0,l.Z)();return(0,s.jsx)(o(),{disabled:u,value:t,placeholder:n,highlight:function(e){return(0,i.highlight)(e,"json"===c?i.languages.json:i.languages.js)},padding:10,onValueChange:f,onMouseUp:h,onBlur:p,tabSize:4,style:(0,r.Z)((0,r.Z)({},d),{},{background:g.palette.codeEditor.main}),textareaClassName:"editor__textarea"})}},94677:function(e,t,n){n.d(t,{d:function(){return u}});var r=n(33028),a=n(45304),o=n.n(a),i=n(73835),l=(n(49015),n(61889),n(58457),n(44057),n(94702)),s=n(37574),u=function(e){var t=e.value,n=e.placeholder,a=e.disabled,u=void 0!==a&&a,c=e.type,d=e.style,f=e.onValueChange,h=e.onMouseUp,p=e.onBlur,g=(0,l.Z)();return(0,s.jsx)(o(),{disabled:u,value:t,placeholder:n,highlight:function(e){return(0,i.highlight)(e,"json"===c?i.languages.json:i.languages.js)},padding:10,onValueChange:f,onMouseUp:h,onBlur:p,tabSize:4,style:(0,r.Z)((0,r.Z)({},d),{},{background:g.palette.card.main}),textareaClassName:"editor__textarea"})}},30530:function(e,t,n){n.d(t,{I:function(){return j}});var r=n(96234),a=n(30969),o=n(39494),i=n(33656),l=n(15749),s=n(69405),u=n(48886),c=n(87130),d=n(47915),f=n(91862),h=n(26018),p=n(94702),g=n(42558),v=n.n(g),m=n(52312),x=n(84956),w=n(94677),b=n(2383),Z=n(37574),y=function(e){var t=e.show,n=e.dialogProps,o=e.onCancel,i=e.onConfirm,g=document.getElementById("portal"),y=(0,p.Z)(),j=(0,s.I0)(),C=(0,s.v9)((function(e){return e.customization})),S="json",P=(0,a.useState)(""),k=(0,r.Z)(P,2),E=k[0],I=k[1],N=(0,a.useState)(null),B=(0,r.Z)(N,2),O=B[0],z=B[1];(0,a.useEffect)((function(){return n.value&&I(n.value),n.inputParam&&z(n.inputParam),function(){I(""),z(null)}}),[n]),(0,a.useEffect)((function(){j(t?{type:b.tS}:{type:b.Go})}),[t,j]);var U=t?(0,Z.jsxs)(u.Z,{open:t,fullWidth:!0,maxWidth:"md","aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,Z.jsx)(c.Z,{children:(0,Z.jsx)("div",{style:{display:"flex",flexDirection:"row"},children:O&&"string"===O.type&&(0,Z.jsxs)("div",{style:{flex:70},children:[(0,Z.jsx)(d.Z,{sx:{mb:2,ml:1},variant:"h4",children:O.label}),(0,Z.jsx)(v(),{style:{border:"1px solid",borderColor:y.palette.grey[500],borderRadius:"12px",height:"100%",maxHeight:"calc(100vh - 220px)",overflowX:"hidden",backgroundColor:"white"},children:C.isDarkMode?(0,Z.jsx)(x.x,{disabled:n.disabled,value:E,onValueChange:function(e){return I(e)},placeholder:O.placeholder,type:S,style:{fontSize:"0.875rem",minHeight:"calc(100vh - 220px)",width:"100%"}}):(0,Z.jsx)(w.d,{disabled:n.disabled,value:E,onValueChange:function(e){return I(e)},placeholder:O.placeholder,type:S,style:{fontSize:"0.875rem",minHeight:"calc(100vh - 220px)",width:"100%"}})})]})})}),(0,Z.jsxs)(f.Z,{children:[(0,Z.jsx)(h.Z,{onClick:o,children:n.cancelButtonName}),(0,Z.jsx)(m.S,{disabled:n.disabled,variant:"contained",onClick:function(){return i(E,O.name)},children:n.confirmButtonName})]})]}):null;return(0,l.createPortal)(U,g)},j=function(e){var t,n,l=e.inputParam,s=e.value,u=e.onChange,c=e.disabled,d=void 0!==c&&c,f=e.showDialog,h=e.dialogProps,p=e.onDialogCancel,g=e.onDialogConfirm,v=(0,a.useState)(null!==s&&void 0!==s?s:""),m=(0,r.Z)(v,2),x=m[0],w=m[1];return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(o.Z,{sx:{mt:1,width:"100%"},size:"small",children:(0,Z.jsx)(i.Z,{id:l.name,size:"small",disabled:d,type:function(e){switch(e){case"string":default:return"text";case"password":return"password";case"number":return"number"}}(l.type),placeholder:l.placeholder,multiline:!!l.rows,rows:null!==(t=l.rows)&&void 0!==t?t:1,value:x,name:l.name,onChange:function(e){w(e.target.value),u(e.target.value)},inputProps:{step:null!==(n=l.step)&&void 0!==n?n:.1,style:{height:l.rows?"90px":"inherit"}}})}),f&&(0,Z.jsx)(y,{show:f,dialogProps:h,onCancel:p,onConfirm:function(e,t){w(e),g(e,t)}})]})}},19448:function(e,t,n){n.r(t),n.d(t,{default:function(){return p}});var r=n(96234),a=n(30969),o=n(32723),i=n(37574);function l(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{s(r.next(e))}catch(e){o(e)}}function l(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))}var s=function(e){var t=e.style,r=e.className,s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(e,["style","className"]),u=(0,a.useRef)(null);return(0,a.useEffect)((function(){l(void 0,void 0,void 0,(0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(690).then(n.bind(n,20690));case 2:case"end":return e.stop()}}),e)})))}),[]),(0,a.useEffect)((function(){u.current&&Object.assign(u.current,s)}),[s]),(0,i.jsx)("flowise-fullchatbot",{ref:u,style:t,class:r})},u=n(13026),c=n(54231),d=n(76858),f=n(60990),h=n(11021),p=function(){var e=document.location.pathname.toString().split("/"),t="chatbot"===e[e.length-1]?"":e[e.length-1],n=(0,u.s0)(),o=(0,a.useState)(null),l=(0,r.Z)(o,2),p=l[0],g=l[1],v=(0,a.useState)({}),m=(0,r.Z)(v,2),x=m[0],w=m[1],b=(0,a.useState)(!1),Z=(0,r.Z)(b,2),y=Z[0],j=Z[1],C=(0,a.useState)({}),S=(0,r.Z)(C,2),P=S[0],k=S[1],E=(0,a.useState)(!0),I=(0,r.Z)(E,2),N=I[0],B=I[1],O=(0,a.useState)({}),z=(0,r.Z)(O,2),U=z[0],D=z[1],V=(0,f.Z)(d.Z.getSpecificChatflowFromPublicEndpoint),_=(0,f.Z)(d.Z.getSpecificChatflow);return(0,a.useEffect)((function(){V.request(t)}),[]),(0,a.useEffect)((function(){var e,n;V.error&&(401===(null===(e=V.error)||void 0===e||null===(n=e.response)||void 0===n?void 0:n.status)&&(localStorage.getItem("username")&&localStorage.getItem("password")?_.request(t):(k({title:"Login",confirmButtonName:"Login"}),j(!0))))}),[V.error]),(0,a.useEffect)((function(){var e,t;_.error&&(401===(null===(e=_.error)||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status)&&(k({title:"Login",confirmButtonName:"Login"}),j(!0)))}),[_.error]),(0,a.useEffect)((function(){if(V.data||_.data){var e=V.data||_.data;if(g(e),e.chatbotConfig)try{var t=JSON.parse(e.chatbotConfig);w(t),t.overrideConfig&&(t.overrideConfig.generateNewSession&&(t.overrideConfig.sessionId=Date.now().toString()),D(t.overrideConfig))}catch(n){console.error(n),w({}),D({})}}}),[V.data,_.data]),(0,a.useEffect)((function(){B(V.loading||_.loading)}),[V.loading,_.loading]),(0,i.jsx)(i.Fragment,{children:N?null:(0,i.jsxs)(i.Fragment,{children:[!p||p.apikeyid?(0,i.jsx)("p",{children:"Invalid Chatbot"}):(0,i.jsx)(s,{chatflowid:p.id,apiHost:h.v2,chatflowConfig:U,theme:{chatWindow:x}}),(0,i.jsx)(c.Z,{show:y,dialogProps:P,onConfirm:function(e,t){localStorage.setItem("username",e),localStorage.setItem("password",t),n(0)}})]})})}}}]);
//# sourceMappingURL=9448.7fdd8447.chunk.js.map