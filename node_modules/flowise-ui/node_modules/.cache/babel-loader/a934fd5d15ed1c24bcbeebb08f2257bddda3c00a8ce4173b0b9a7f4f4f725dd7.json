{"ast":null,"code":"import _slicedToArray from\"/Users/zorro/Downloads/Flowise/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useRef}from'react';import ReactFlow,{Controls,Background,useNodesState,useEdgesState}from'reactflow';import'reactflow/dist/style.css';import'views/canvas/index.css';import{useLocation,useNavigate}from'react-router-dom';// material-ui\nimport{Toolbar,Box,AppBar}from'@mui/material';import{useTheme}from'@mui/material/styles';// project imports\nimport MarketplaceCanvasNode from'./MarketplaceCanvasNode';import MarketplaceCanvasHeader from'./MarketplaceCanvasHeader';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var nodeTypes={customNode:MarketplaceCanvasNode};var edgeTypes={buttonedge:''};// ==============================|| CANVAS ||============================== //\nvar MarketplaceCanvas=function MarketplaceCanvas(){var theme=useTheme();var navigate=useNavigate();var _useLocation=useLocation(),state=_useLocation.state;var flowData=state.flowData,name=state.name;// ==============================|| ReactFlow ||============================== //\nvar _useNodesState=useNodesState(),_useNodesState2=_slicedToArray(_useNodesState,3),nodes=_useNodesState2[0],setNodes=_useNodesState2[1],onNodesChange=_useNodesState2[2];var _useEdgesState=useEdgesState(),_useEdgesState2=_slicedToArray(_useEdgesState,3),edges=_useEdgesState2[0],setEdges=_useEdgesState2[1],onEdgesChange=_useEdgesState2[2];var reactFlowWrapper=useRef(null);// ==============================|| useEffect ||============================== //\nuseEffect(function(){if(flowData){var initialFlow=JSON.parse(flowData);setNodes(initialFlow.nodes||[]);setEdges(initialFlow.edges||[]);}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[flowData]);var _onChatflowCopy=function onChatflowCopy(flowData){var templateFlowData=JSON.stringify(flowData);navigate(\"/canvas\",{state:{templateFlowData:templateFlowData}});};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(AppBar,{enableColorOnDark:true,position:\"fixed\",color:\"inherit\",elevation:1,sx:{bgcolor:theme.palette.background.default},children:/*#__PURE__*/_jsx(Toolbar,{children:/*#__PURE__*/_jsx(MarketplaceCanvasHeader,{flowName:name,flowData:JSON.parse(flowData),onChatflowCopy:function onChatflowCopy(flowData){return _onChatflowCopy(flowData);}})})}),/*#__PURE__*/_jsx(Box,{sx:{pt:'70px',height:'100vh',width:'100%'},children:/*#__PURE__*/_jsx(\"div\",{className:\"reactflow-parent-wrapper\",children:/*#__PURE__*/_jsx(\"div\",{className:\"reactflow-wrapper\",ref:reactFlowWrapper,children:/*#__PURE__*/_jsxs(ReactFlow,{nodes:nodes,edges:edges,onNodesChange:onNodesChange,onEdgesChange:onEdgesChange,nodesDraggable:false,nodeTypes:nodeTypes,edgeTypes:edgeTypes,fitView:true,minZoom:0.1,children:[/*#__PURE__*/_jsx(Controls,{style:{display:'flex',flexDirection:'row',left:'50%',transform:'translate(-50%, -50%)'}}),/*#__PURE__*/_jsx(Background,{color:\"#aaa\",gap:16})]})})})})]})});};export default MarketplaceCanvas;","map":{"version":3,"names":["useEffect","useRef","ReactFlow","Controls","Background","useNodesState","useEdgesState","useLocation","useNavigate","Toolbar","Box","AppBar","useTheme","MarketplaceCanvasNode","MarketplaceCanvasHeader","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","nodeTypes","customNode","edgeTypes","buttonedge","MarketplaceCanvas","theme","navigate","_useLocation","state","flowData","name","_useNodesState","_useNodesState2","_slicedToArray","nodes","setNodes","onNodesChange","_useEdgesState","_useEdgesState2","edges","setEdges","onEdgesChange","reactFlowWrapper","initialFlow","JSON","parse","onChatflowCopy","templateFlowData","stringify","children","enableColorOnDark","position","color","elevation","sx","bgcolor","palette","background","default","flowName","pt","height","width","className","ref","nodesDraggable","fitView","minZoom","style","display","flexDirection","left","transform","gap"],"sources":["/Users/zorro/Downloads/Flowise/packages/ui/src/views/marketplaces/MarketplaceCanvas.js"],"sourcesContent":["import { useEffect, useRef } from 'react'\nimport ReactFlow, { Controls, Background, useNodesState, useEdgesState } from 'reactflow'\nimport 'reactflow/dist/style.css'\nimport 'views/canvas/index.css'\n\nimport { useLocation, useNavigate } from 'react-router-dom'\n\n// material-ui\nimport { Toolbar, Box, AppBar } from '@mui/material'\nimport { useTheme } from '@mui/material/styles'\n\n// project imports\nimport MarketplaceCanvasNode from './MarketplaceCanvasNode'\n\nimport MarketplaceCanvasHeader from './MarketplaceCanvasHeader'\n\nconst nodeTypes = { customNode: MarketplaceCanvasNode }\nconst edgeTypes = { buttonedge: '' }\n\n// ==============================|| CANVAS ||============================== //\n\nconst MarketplaceCanvas = () => {\n    const theme = useTheme()\n    const navigate = useNavigate()\n\n    const { state } = useLocation()\n    const { flowData, name } = state\n\n    // ==============================|| ReactFlow ||============================== //\n\n    const [nodes, setNodes, onNodesChange] = useNodesState()\n    const [edges, setEdges, onEdgesChange] = useEdgesState()\n\n    const reactFlowWrapper = useRef(null)\n\n    // ==============================|| useEffect ||============================== //\n\n    useEffect(() => {\n        if (flowData) {\n            const initialFlow = JSON.parse(flowData)\n            setNodes(initialFlow.nodes || [])\n            setEdges(initialFlow.edges || [])\n        }\n\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [flowData])\n\n    const onChatflowCopy = (flowData) => {\n        const templateFlowData = JSON.stringify(flowData)\n        navigate(`/canvas`, { state: { templateFlowData } })\n    }\n\n    return (\n        <>\n            <Box>\n                <AppBar\n                    enableColorOnDark\n                    position='fixed'\n                    color='inherit'\n                    elevation={1}\n                    sx={{\n                        bgcolor: theme.palette.background.default\n                    }}\n                >\n                    <Toolbar>\n                        <MarketplaceCanvasHeader\n                            flowName={name}\n                            flowData={JSON.parse(flowData)}\n                            onChatflowCopy={(flowData) => onChatflowCopy(flowData)}\n                        />\n                    </Toolbar>\n                </AppBar>\n                <Box sx={{ pt: '70px', height: '100vh', width: '100%' }}>\n                    <div className='reactflow-parent-wrapper'>\n                        <div className='reactflow-wrapper' ref={reactFlowWrapper}>\n                            <ReactFlow\n                                nodes={nodes}\n                                edges={edges}\n                                onNodesChange={onNodesChange}\n                                onEdgesChange={onEdgesChange}\n                                nodesDraggable={false}\n                                nodeTypes={nodeTypes}\n                                edgeTypes={edgeTypes}\n                                fitView\n                                minZoom={0.1}\n                            >\n                                <Controls\n                                    style={{\n                                        display: 'flex',\n                                        flexDirection: 'row',\n                                        left: '50%',\n                                        transform: 'translate(-50%, -50%)'\n                                    }}\n                                />\n                                <Background color='#aaa' gap={16} />\n                            </ReactFlow>\n                        </div>\n                    </div>\n                </Box>\n            </Box>\n        </>\n    )\n}\n\nexport default MarketplaceCanvas\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}