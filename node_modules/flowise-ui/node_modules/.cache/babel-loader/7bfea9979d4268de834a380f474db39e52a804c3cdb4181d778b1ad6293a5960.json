{"ast":null,"code":"import _slicedToArray from\"/Users/zorro/Downloads/Flowise/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState,useRef}from'react';import{useSelector}from'react-redux';// material-ui\nimport{Grid,Box,Stack,Button}from'@mui/material';import{useTheme}from'@mui/material/styles';// project imports\nimport MainCard from'ui-component/cards/MainCard';import ItemCard from'ui-component/cards/ItemCard';import{gridSpacing}from'store/constant';import ToolEmptySVG from'assets/images/tools_empty.svg';import{StyledButton}from'ui-component/button/StyledButton';import ToolDialog from'./ToolDialog';// API\nimport toolsApi from'api/tools';// Hooks\nimport useApi from'hooks/useApi';// icons\nimport{IconPlus,IconFileImport}from'@tabler/icons';// ==============================|| CHATFLOWS ||============================== //\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Tools=function Tools(){var theme=useTheme();var customization=useSelector(function(state){return state.customization;});var getAllToolsApi=useApi(toolsApi.getAllTools);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showDialog=_useState2[0],setShowDialog=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),dialogProps=_useState4[0],setDialogProps=_useState4[1];var inputRef=useRef(null);var onUploadFile=function onUploadFile(file){try{var dialogProp={title:'Add New Tool',type:'IMPORT',cancelButtonName:'Cancel',confirmButtonName:'Save',data:JSON.parse(file)};setDialogProps(dialogProp);setShowDialog(true);}catch(e){console.error(e);}};var handleFileUpload=function handleFileUpload(e){if(!e.target.files)return;var file=e.target.files[0];var reader=new FileReader();reader.onload=function(evt){var _evt$target;if(!(evt!==null&&evt!==void 0&&(_evt$target=evt.target)!==null&&_evt$target!==void 0&&_evt$target.result)){return;}var result=evt.target.result;onUploadFile(result);};reader.readAsText(file);};var addNew=function addNew(){var dialogProp={title:'Add New Tool',type:'ADD',cancelButtonName:'Cancel',confirmButtonName:'Add'};setDialogProps(dialogProp);setShowDialog(true);};var edit=function edit(selectedTool){var dialogProp={title:'Edit Tool',type:'EDIT',cancelButtonName:'Cancel',confirmButtonName:'Save',data:selectedTool};setDialogProps(dialogProp);setShowDialog(true);};var onConfirm=function onConfirm(){setShowDialog(false);getAllToolsApi.request();};useEffect(function(){getAllToolsApi.request();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(MainCard,{sx:{background:customization.isDarkMode?theme.palette.common.black:''},children:[/*#__PURE__*/_jsxs(Stack,{flexDirection:\"row\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Tools\"}),/*#__PURE__*/_jsxs(Grid,{sx:{mb:1.25},container:true,direction:\"row\",children:[/*#__PURE__*/_jsx(Box,{sx:{flexGrow:1}}),/*#__PURE__*/_jsxs(Grid,{item:true,children:[/*#__PURE__*/_jsx(Button,{variant:\"outlined\",sx:{mr:2},onClick:function onClick(){return inputRef.current.click();},startIcon:/*#__PURE__*/_jsx(IconFileImport,{}),children:\"Load\"}),/*#__PURE__*/_jsx(\"input\",{ref:inputRef,type:\"file\",hidden:true,accept:\".json\",onChange:function onChange(e){return handleFileUpload(e);}}),/*#__PURE__*/_jsx(StyledButton,{variant:\"contained\",sx:{color:'white'},onClick:addNew,startIcon:/*#__PURE__*/_jsx(IconPlus,{}),children:\"Create\"})]})]})]}),/*#__PURE__*/_jsx(Grid,{container:true,spacing:gridSpacing,children:!getAllToolsApi.loading&&getAllToolsApi.data&&getAllToolsApi.data.map(function(data,index){return/*#__PURE__*/_jsx(Grid,{item:true,lg:3,md:4,sm:6,xs:12,children:/*#__PURE__*/_jsx(ItemCard,{data:data,onClick:function onClick(){return edit(data);}})},index);})}),!getAllToolsApi.loading&&(!getAllToolsApi.data||getAllToolsApi.data.length===0)&&/*#__PURE__*/_jsxs(Stack,{sx:{alignItems:'center',justifyContent:'center'},flexDirection:\"column\",children:[/*#__PURE__*/_jsx(Box,{sx:{p:2,height:'auto'},children:/*#__PURE__*/_jsx(\"img\",{style:{objectFit:'cover',height:'30vh',width:'auto'},src:ToolEmptySVG,alt:\"ToolEmptySVG\"})}),/*#__PURE__*/_jsx(\"div\",{children:\"No Tools Created Yet\"})]})]}),/*#__PURE__*/_jsx(ToolDialog,{show:showDialog,dialogProps:dialogProps,onCancel:function onCancel(){return setShowDialog(false);},onConfirm:onConfirm})]});};export default Tools;","map":{"version":3,"names":["useEffect","useState","useRef","useSelector","Grid","Box","Stack","Button","useTheme","MainCard","ItemCard","gridSpacing","ToolEmptySVG","StyledButton","ToolDialog","toolsApi","useApi","IconPlus","IconFileImport","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Tools","theme","customization","state","getAllToolsApi","getAllTools","_useState","_useState2","_slicedToArray","showDialog","setShowDialog","_useState3","_useState4","dialogProps","setDialogProps","inputRef","onUploadFile","file","dialogProp","title","type","cancelButtonName","confirmButtonName","data","JSON","parse","e","console","error","handleFileUpload","target","files","reader","FileReader","onload","evt","_evt$target","result","readAsText","addNew","edit","selectedTool","onConfirm","request","children","sx","background","isDarkMode","palette","common","black","flexDirection","mb","container","direction","flexGrow","item","variant","mr","onClick","current","click","startIcon","ref","hidden","accept","onChange","color","spacing","loading","map","index","lg","md","sm","xs","length","alignItems","justifyContent","p","height","style","objectFit","width","src","alt","show","onCancel"],"sources":["/Users/zorro/Downloads/Flowise/packages/ui/src/views/tools/index.js"],"sourcesContent":["import { useEffect, useState, useRef } from 'react'\nimport { useSelector } from 'react-redux'\n\n// material-ui\nimport { Grid, Box, Stack, Button } from '@mui/material'\nimport { useTheme } from '@mui/material/styles'\n\n// project imports\nimport MainCard from 'ui-component/cards/MainCard'\nimport ItemCard from 'ui-component/cards/ItemCard'\nimport { gridSpacing } from 'store/constant'\nimport ToolEmptySVG from 'assets/images/tools_empty.svg'\nimport { StyledButton } from 'ui-component/button/StyledButton'\nimport ToolDialog from './ToolDialog'\n\n// API\nimport toolsApi from 'api/tools'\n\n// Hooks\nimport useApi from 'hooks/useApi'\n\n// icons\nimport { IconPlus, IconFileImport } from '@tabler/icons'\n\n// ==============================|| CHATFLOWS ||============================== //\n\nconst Tools = () => {\n    const theme = useTheme()\n    const customization = useSelector((state) => state.customization)\n\n    const getAllToolsApi = useApi(toolsApi.getAllTools)\n\n    const [showDialog, setShowDialog] = useState(false)\n    const [dialogProps, setDialogProps] = useState({})\n\n    const inputRef = useRef(null)\n\n    const onUploadFile = (file) => {\n        try {\n            const dialogProp = {\n                title: 'Add New Tool',\n                type: 'IMPORT',\n                cancelButtonName: 'Cancel',\n                confirmButtonName: 'Save',\n                data: JSON.parse(file)\n            }\n            setDialogProps(dialogProp)\n            setShowDialog(true)\n        } catch (e) {\n            console.error(e)\n        }\n    }\n\n    const handleFileUpload = (e) => {\n        if (!e.target.files) return\n\n        const file = e.target.files[0]\n\n        const reader = new FileReader()\n        reader.onload = (evt) => {\n            if (!evt?.target?.result) {\n                return\n            }\n            const { result } = evt.target\n            onUploadFile(result)\n        }\n        reader.readAsText(file)\n    }\n\n    const addNew = () => {\n        const dialogProp = {\n            title: 'Add New Tool',\n            type: 'ADD',\n            cancelButtonName: 'Cancel',\n            confirmButtonName: 'Add'\n        }\n        setDialogProps(dialogProp)\n        setShowDialog(true)\n    }\n\n    const edit = (selectedTool) => {\n        const dialogProp = {\n            title: 'Edit Tool',\n            type: 'EDIT',\n            cancelButtonName: 'Cancel',\n            confirmButtonName: 'Save',\n            data: selectedTool\n        }\n        setDialogProps(dialogProp)\n        setShowDialog(true)\n    }\n\n    const onConfirm = () => {\n        setShowDialog(false)\n        getAllToolsApi.request()\n    }\n\n    useEffect(() => {\n        getAllToolsApi.request()\n\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [])\n\n    return (\n        <>\n            <MainCard sx={{ background: customization.isDarkMode ? theme.palette.common.black : '' }}>\n                <Stack flexDirection='row'>\n                    <h1>Tools</h1>\n                    <Grid sx={{ mb: 1.25 }} container direction='row'>\n                        <Box sx={{ flexGrow: 1 }} />\n                        <Grid item>\n                            <Button\n                                variant='outlined'\n                                sx={{ mr: 2 }}\n                                onClick={() => inputRef.current.click()}\n                                startIcon={<IconFileImport />}\n                            >\n                                Load\n                            </Button>\n                            <input ref={inputRef} type='file' hidden accept='.json' onChange={(e) => handleFileUpload(e)} />\n                            <StyledButton variant='contained' sx={{ color: 'white' }} onClick={addNew} startIcon={<IconPlus />}>\n                                Create\n                            </StyledButton>\n                        </Grid>\n                    </Grid>\n                </Stack>\n                <Grid container spacing={gridSpacing}>\n                    {!getAllToolsApi.loading &&\n                        getAllToolsApi.data &&\n                        getAllToolsApi.data.map((data, index) => (\n                            <Grid key={index} item lg={3} md={4} sm={6} xs={12}>\n                                <ItemCard data={data} onClick={() => edit(data)} />\n                            </Grid>\n                        ))}\n                </Grid>\n                {!getAllToolsApi.loading && (!getAllToolsApi.data || getAllToolsApi.data.length === 0) && (\n                    <Stack sx={{ alignItems: 'center', justifyContent: 'center' }} flexDirection='column'>\n                        <Box sx={{ p: 2, height: 'auto' }}>\n                            <img style={{ objectFit: 'cover', height: '30vh', width: 'auto' }} src={ToolEmptySVG} alt='ToolEmptySVG' />\n                        </Box>\n                        <div>No Tools Created Yet</div>\n                    </Stack>\n                )}\n            </MainCard>\n            <ToolDialog\n                show={showDialog}\n                dialogProps={dialogProps}\n                onCancel={() => setShowDialog(false)}\n                onConfirm={onConfirm}\n            ></ToolDialog>\n        </>\n    )\n}\n\nexport default Tools\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}