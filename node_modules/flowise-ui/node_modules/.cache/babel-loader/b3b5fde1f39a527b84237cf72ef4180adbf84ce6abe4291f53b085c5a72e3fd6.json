{"ast":null,"code":"import _objectSpread from\"/Users/zorro/Downloads/Flowise/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useCallback,useContext,useEffect}from'react';import{UNSAFE_NavigationContext as NavigationContext}from'react-router-dom';// https://stackoverflow.com/questions/71572678/react-router-v-6-useprompt-typescript\nexport function useBlocker(blocker){var when=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var _useContext=useContext(NavigationContext),navigator=_useContext.navigator;useEffect(function(){if(!when)return;var unblock=navigator.block(function(tx){var autoUnblockingTx=_objectSpread(_objectSpread({},tx),{},{retry:function retry(){unblock();tx.retry();}});blocker(autoUnblockingTx);});return unblock;},[navigator,blocker,when]);}export function usePrompt(message){var when=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var blocker=useCallback(function(tx){if(window.confirm(message))tx.retry();},[message]);useBlocker(blocker,when);}","map":{"version":3,"names":["useCallback","useContext","useEffect","UNSAFE_NavigationContext","NavigationContext","useBlocker","blocker","when","arguments","length","undefined","_useContext","navigator","unblock","block","tx","autoUnblockingTx","_objectSpread","retry","usePrompt","message","window","confirm"],"sources":["/Users/zorro/Downloads/Flowise/packages/ui/src/utils/usePrompt.js"],"sourcesContent":["import { useCallback, useContext, useEffect } from 'react'\nimport { UNSAFE_NavigationContext as NavigationContext } from 'react-router-dom'\n\n// https://stackoverflow.com/questions/71572678/react-router-v-6-useprompt-typescript\n\nexport function useBlocker(blocker, when = true) {\n    const { navigator } = useContext(NavigationContext)\n\n    useEffect(() => {\n        if (!when) return\n\n        const unblock = navigator.block((tx) => {\n            const autoUnblockingTx = {\n                ...tx,\n                retry() {\n                    unblock()\n                    tx.retry()\n                }\n            }\n\n            blocker(autoUnblockingTx)\n        })\n\n        return unblock\n    }, [navigator, blocker, when])\n}\n\nexport function usePrompt(message, when = true) {\n    const blocker = useCallback(\n        (tx) => {\n            if (window.confirm(message)) tx.retry()\n        },\n        [message]\n    )\n\n    useBlocker(blocker, when)\n}\n"],"mappings":"mHAAA,OAASA,WAAW,CAAEC,UAAU,CAAEC,SAAS,KAAQ,OAAO,CAC1D,OAASC,wBAAwB,GAAI,CAAAC,iBAAiB,KAAQ,kBAAkB,CAEhF;AAEA,MAAO,SAAS,CAAAC,UAAUA,CAACC,OAAO,CAAe,IAAb,CAAAC,IAAI,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,IAAI,CAC3C,IAAAG,WAAA,CAAsBV,UAAU,CAACG,iBAAiB,CAAC,CAA3CQ,SAAS,CAAAD,WAAA,CAATC,SAAS,CAEjBV,SAAS,CAAC,UAAM,CACZ,GAAI,CAACK,IAAI,CAAE,OAEX,GAAM,CAAAM,OAAO,CAAGD,SAAS,CAACE,KAAK,CAAC,SAACC,EAAE,CAAK,CACpC,GAAM,CAAAC,gBAAgB,CAAAC,aAAA,CAAAA,aAAA,IACfF,EAAE,MACLG,KAAK,UAAAA,MAAA,CAAG,CACJL,OAAO,CAAC,CAAC,CACTE,EAAE,CAACG,KAAK,CAAC,CAAC,CACd,CAAC,EACJ,CAEDZ,OAAO,CAACU,gBAAgB,CAAC,CAC7B,CAAC,CAAC,CAEF,MAAO,CAAAH,OAAO,CAClB,CAAC,CAAE,CAACD,SAAS,CAAEN,OAAO,CAAEC,IAAI,CAAC,CAAC,CAClC,CAEA,MAAO,SAAS,CAAAY,SAASA,CAACC,OAAO,CAAe,IAAb,CAAAb,IAAI,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,IAAI,CAC1C,GAAM,CAAAF,OAAO,CAAGN,WAAW,CACvB,SAACe,EAAE,CAAK,CACJ,GAAIM,MAAM,CAACC,OAAO,CAACF,OAAO,CAAC,CAAEL,EAAE,CAACG,KAAK,CAAC,CAAC,CAC3C,CAAC,CACD,CAACE,OAAO,CACZ,CAAC,CAEDf,UAAU,CAACC,OAAO,CAAEC,IAAI,CAAC,CAC7B"},"metadata":{},"sourceType":"module","externalDependencies":[]}